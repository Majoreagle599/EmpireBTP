{% extends 'base.html.twig' %}

{% block title %}Accueil - Empire BTP{% endblock %}

{% block body %}
<div class="hero-section animate-fade-in">
    <div class="container text-center">
        <div class="hero-content">
            {% if app.user %}
                <p class="hero-subtitle animate-slide-up">Bienvenue dans votre empire</p>
                <h1 class="hero-title animate-slide-up">
                    <span>{{ app.user.name|default(app.user.email) }}</span>
                </h1>
                <p class="lead animate-slide-up">
                    Votre plateforme de gestion BTP derni√®re g√©n√©ration. 
                    <br>G√©rez vos chantiers, optimisez votre mat√©riel et dominez le secteur.
                </p>
                <div class="mt-4 animate-slide-up">
                    <a href="{{ path('app_materiel') }}" class="btn btn-custom me-3">
                        üöÄ Acc√©der au Mat√©riel
                    </a>
                    <a href="{{ path('app_account') }}" class="btn btn-outline-custom">
                        üë§ Mon profil
                    </a>
                </div>
            {% else %}
                <p class="hero-subtitle animate-slide-up">Bienvenue sur</p>
                <h1 class="hero-title animate-slide-up">
                    Empire <span>BTP</span>
                </h1>
                <p class="lead animate-slide-up">
                    La plateforme nouvelle g√©n√©ration pour g√©rer votre entreprise de construction.
                    <br>Technologie gaming. Performance professionnelle.
                </p>
                <div class="mt-4 animate-slide-up">
                    <a href="{{ path('app_register') }}" class="btn btn-custom me-3">
                        üöÄ Commencer Maintenant
                    </a>
                    <a href="{{ path('app_login') }}" class="btn btn-outline-custom">
                        üîë Se connecter
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

{# Section Secteurs d'activit√© - Visible uniquement pour les utilisateurs connect√©s #}
{% if app.user %}
<div class="py-5" style="background-color: var(--bg-main); position: relative; z-index: 1;">
    <div class="container">
        <div class="text-center mb-5 animate-slide-up">
            <h2 class="display-5 fw-bold text-accent mb-3">üéØ Les Secteurs d'Activit√©</h2>
            <p class="text-secondary fs-5">Sp√©cialisez-vous dans l'un de nos 4 secteurs du BTP</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6 col-lg-3 animate-slide-up">
                <a href="{{ path('app_secteur_voirie') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üõ£Ô∏è</div>
                        <h3 class="card-title">Voirie</h3>
                        <p class="card-text">
                            Travaux routiers, am√©nagements urbains et infrastructures
                        </p>
                        <span class="text-accent fw-bold">D√©couvrir ‚Üí</span>
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3 animate-slide-up" style="animation-delay: 0.1s;">
                <a href="{{ path('app_secteur_carriere') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">‚õèÔ∏è</div>
                        <h3 class="card-title">Carri√®re</h3>
                        <p class="card-text">
                            Extraction de mat√©riaux, concassage et production
                        </p>
                        <span class="text-accent fw-bold">D√©couvrir ‚Üí</span>
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3 animate-slide-up" style="animation-delay: 0.2s;">
                <a href="{{ path('app_secteur_demolition') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üí•</div>
                        <h3 class="card-title">D√©molition</h3>
                        <p class="card-text">
                            D√©construction, d√©montage et recyclage
                        </p>
                        <span class="text-accent fw-bold">D√©couvrir ‚Üí</span>
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3 animate-slide-up" style="animation-delay: 0.3s;">
                <a href="{{ path('app_secteur_transport') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üöö</div>
                        <h3 class="card-title">Transport</h3>
                        <p class="card-text">
                            Logistique BTP et gestion de flotte
                        </p>
                        <span class="text-accent fw-bold">D√©couvrir ‚Üí</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Section Outils et Fonctionnalit√©s - Uniquement si connect√© #}
{% if app.user %}
<div class="container py-5">
    <div class="text-center mb-5 animate-slide-up">
        <h2 class="display-5 fw-bold text-accent mb-3">‚öôÔ∏è Vos Outils de Gestion</h2>
        <p class="text-secondary fs-5">Des fonctionnalit√©s pens√©es pour optimiser votre entreprise BTP</p>
    </div>
    
    <div class="row g-4">
        <div class="col-md-6 col-lg-4 animate-slide-up">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üöú</div>
                    <h3 class="card-title">Catalogue Mat√©riel</h3>
                    <p class="card-text">
                        Explorez 100+ machines BTP avec filtres par secteur, cat√©gorie et marque. Achat et location disponibles.
                    </p>
                    <a href="{{ path('app_materiel') }}" class="btn btn-outline-primary mt-auto">
                        Voir le catalogue
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.1s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üèóÔ∏è</div>
                    <h3 class="card-title">Gestion de Chantiers</h3>
                    <p class="card-text">
                        Cr√©ez, planifiez et suivez vos chantiers en temps r√©el. Assignez le mat√©riel et le personnel.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        G√©rer mes chantiers
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.2s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üë∑</div>
                    <h3 class="card-title">Gestion du Personnel</h3>
                    <p class="card-text">
                        Recrutez, formez et g√©rez votre √©quipe. Optimisez la productivit√© et les comp√©tences.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        G√©rer le personnel
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.3s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üîß</div>
                    <h3 class="card-title">Maintenance</h3>
                    <p class="card-text">
                        Suivez l'usure de votre parc mat√©riel. Planifiez les r√©parations et optimisez la disponibilit√©.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        Maintenance
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.4s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìä</div>
                    <h3 class="card-title">Statistiques</h3>
                    <p class="card-text">
                        Tableaux de bord d√©taill√©s sur la rentabilit√©, l'utilisation du mat√©riel et la progression.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        Voir les stats
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.5s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üõí</div>
                    <h3 class="card-title">March√©</h3>
                    <p class="card-text">
                        Achetez et vendez du mat√©riel d'occasion. Trouvez les meilleures opportunit√©s du march√©.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        Acc√©der au march√©
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Sections Mises √† jour - Uniquement si NON connect√© #}
{% if not app.user %}
{# Section Mises √† jour r√©centes #}
<div class="updates-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-accent mb-3">üìù Mises √† jour r√©centes</h2>
            <p class="text-secondary fs-5">D√©couvrez les derni√®res am√©liorations d'Empire BTP</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-8 mx-auto">
                {# Version 1.2.0 - Toujours visible #}
                <div class="update-card">
                    <div class="update-header">
                        <span class="update-badge update-badge-new">NOUVEAU</span>
                        <span class="update-version">v1.2.0</span>
                        <span class="update-date">27 Octobre 2024</span>
                    </div>
                    <h3 class="update-title">üé® Refonte graphique compl√®te</h3>
                    <ul class="update-list">
                        <li>‚ú® Nouveau th√®me gaming sombre avec effets glow</li>
                        <li>‚ö° Optimisation des performances (chargement 3x plus rapide)</li>
                        <li>üéØ Navigation Turbo pour une exp√©rience fluide</li>
                        <li>üì± Interface responsive am√©lior√©e</li>
                        <li>üåô Mode sombre permanent avec palette verte moderne</li>
                    </ul>
                </div>

                {# Anciennes versions - Masqu√©es par d√©faut #}
                <div id="oldUpdates" class="collapse">
                    {# Version 1.1.0 #}
                    <div class="update-card">
                        <div class="update-header">
                            <span class="update-version">v1.1.0</span>
                            <span class="update-date">20 Octobre 2024</span>
                        </div>
                        <h3 class="update-title">üöú Syst√®me de mat√©riel BTP</h3>
                        <ul class="update-list">
                            <li>üèóÔ∏è Ajout de 100 machines r√©parties sur 4 secteurs</li>
                            <li>üí∞ Syst√®me d'achat et de location de mat√©riel</li>
                            <li>üìä Statistiques d√©taill√©es par machine</li>
                            <li>üîß Page catalogue avec filtres par secteur</li>
                        </ul>
                    </div>

                    {# Version 1.0.0 #}
                    <div class="update-card">
                        <div class="update-header">
                            <span class="update-version">v1.0.0</span>
                            <span class="update-date">15 Octobre 2024</span>
                        </div>
                        <h3 class="update-title">üéâ Lancement d'Empire BTP</h3>
                        <ul class="update-list">
                            <li>üîê Syst√®me d'authentification complet</li>
                            <li>üë§ Gestion de profil utilisateur</li>
                            <li>üìú R√®glement du jeu</li>
                            <li>üéÆ Interface de base du jeu</li>
                        </ul>
                    </div>
                </div>

                {# Bouton Voir plus/moins #}
                <div class="text-center mt-3">
                    <button class="btn-toggle-updates" type="button" data-bs-toggle="collapse" data-bs-target="#oldUpdates" aria-expanded="false">
                        <span class="toggle-text-more">üìú Voir les anciennes versions</span>
                        <span class="toggle-text-less d-none">üîº Masquer les anciennes versions</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

{# Section Prochaines mises √† jour #}
<div class="roadmap-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-accent mb-3">üöÄ Prochaines mises √† jour</h2>
            <p class="text-secondary fs-5">Ce qui arrive bient√¥t sur Empire BTP</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-8 mx-auto">
                {# En cours de d√©veloppement - Toujours visible #}
                <div class="roadmap-card roadmap-in-progress">
                    <div class="roadmap-status">
                        <span class="roadmap-badge roadmap-badge-progress">EN COURS</span>
                        <span class="roadmap-eta">Sortie pr√©vue : Novembre 2024</span>
                    </div>
                    <h3 class="roadmap-title">üèóÔ∏è v1.3.0 - Syst√®me de chantiers</h3>
                    <ul class="roadmap-list">
                        <li>üìã Cr√©ation et gestion de chantiers</li>
                        <li>‚è±Ô∏è Syst√®me de temps r√©el pour les projets</li>
                        <li>üíº Appels d'offres et contrats</li>
                        <li>üìä Suivi de progression des travaux</li>
                        <li>üí∞ Calcul automatique des co√ªts et b√©n√©fices</li>
                    </ul>
                    <div class="roadmap-progress">
                        <div class="progress">
                            <div class="progress-bar bg-success" style="width: 65%">65%</div>
                        </div>
                    </div>
                </div>

                {# Futures versions - Masqu√©es par d√©faut #}
                <div id="futureRoadmap" class="collapse">
                    {# Planifi√© #}
                    <div class="roadmap-card roadmap-planned">
                        <div class="roadmap-status">
                            <span class="roadmap-badge roadmap-badge-planned">PLANIFI√â</span>
                            <span class="roadmap-eta">Sortie pr√©vue : D√©cembre 2024</span>
                        </div>
                        <h3 class="roadmap-title">üë∑ v1.4.0 - Gestion du personnel</h3>
                        <ul class="roadmap-list">
                            <li>üë®‚Äçüíº Recrutement d'employ√©s (ouvriers, chefs d'√©quipe, ing√©nieurs)</li>
                            <li>üìà Syst√®me d'exp√©rience et de comp√©tences</li>
                            <li>üíµ Gestion des salaires et productivit√©</li>
                            <li>üéì Formation et am√©lioration du personnel</li>
                            <li>‚≠ê Syst√®me de satisfaction et fid√©lit√©</li>
                        </ul>
                    </div>

                    {# Pr√©vu #}
                    <div class="roadmap-card roadmap-future">
                        <div class="roadmap-status">
                            <span class="roadmap-badge roadmap-badge-future">√Ä VENIR</span>
                            <span class="roadmap-eta">T1 2025</span>
                        </div>
                        <h3 class="roadmap-title">üèÜ v1.5.0 - Comp√©tition et classements</h3>
                        <ul class="roadmap-list">
                            <li>ü•á Classements globaux et par secteur</li>
                            <li>ü§ù Syst√®me d'alliances entre joueurs</li>
                            <li>‚öîÔ∏è Appels d'offres comp√©titifs</li>
                            <li>üèÖ Succ√®s et badges √† d√©bloquer</li>
                            <li>üìä Statistiques et comparaisons</li>
                        </ul>
                    </div>

                    {# Id√©es futures #}
                    <div class="roadmap-card roadmap-future">
                        <div class="roadmap-status">
                            <span class="roadmap-badge roadmap-badge-idea">ID√âES</span>
                            <span class="roadmap-eta">2025</span>
                        </div>
                        <h3 class="roadmap-title">üí° Fonctionnalit√©s en r√©flexion</h3>
                        <ul class="roadmap-list">
                            <li>üåç Carte interactive avec villes et r√©gions</li>
                            <li>üí¨ Syst√®me de messagerie entre joueurs</li>
                            <li>üì∞ Fil d'actualit√©s et √©v√©nements du jeu</li>
                            <li>üéÅ √âv√©nements saisonniers et r√©compenses</li>
                            <li>üì± Application mobile</li>
                            <li>üîä Syst√®me de notifications en temps r√©el</li>
                        </ul>
                    </div>
                </div>

                {# Bouton Voir plus/moins #}
                <div class="text-center mt-3">
                    <button class="btn-toggle-roadmap" type="button" data-bs-toggle="collapse" data-bs-target="#futureRoadmap" aria-expanded="false">
                        <span class="toggle-text-more">üöÄ Voir toutes les futures mises √† jour</span>
                        <span class="toggle-text-less d-none">üîº Masquer les futures mises √† jour</span>
                    </button>
                </div>

                {# Bouton Sugg√©rer une fonctionnalit√© #}
                <div class="text-center mt-4">
                    <a href="#" class="btn-suggest-feature" data-bs-toggle="modal" data-bs-target="#suggestModal">
                        <span class="suggest-icon">üí°</span>
                        <span class="suggest-text">Sugg√©rer une fonctionnalit√©</span>
                    </a>
                    <p class="suggest-subtitle">
                        Vous avez une id√©e ? Partagez-la avec nous !
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Modal Suggestion - Visible pour tous #}
<div class="modal fade" id="suggestModal" tabindex="-1" aria-labelledby="suggestModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="suggestModalLabel">üí° Sugg√©rer une fonctionnalit√©</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="suggestForm">
                    <div class="mb-3">
                        <label for="suggestTitle" class="form-label">Titre de la suggestion *</label>
                        <input type="text" class="form-control" id="suggestTitle" required placeholder="Ex: Syst√®me de notifications push">
                    </div>
                    <div class="mb-3">
                        <label for="suggestCategory" class="form-label">Cat√©gorie *</label>
                        <select class="form-select" id="suggestCategory" required>
                            <option value="">Choisir une cat√©gorie...</option>
                            <option value="gameplay">üéÆ Gameplay</option>
                            <option value="interface">üé® Interface</option>
                            <option value="social">üë• Social</option>
                            <option value="technique">‚öôÔ∏è Technique</option>
                            <option value="autre">üí° Autre</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="suggestDescription" class="form-label">Description d√©taill√©e *</label>
                        <textarea class="form-control" id="suggestDescription" rows="5" required placeholder="D√©crivez votre id√©e en d√©tail..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="suggestEmail" class="form-label">Votre email (optionnel)</label>
                        <input type="email" class="form-control" id="suggestEmail" placeholder="Pour vous tenir inform√© de l'avancement">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" onclick="submitSuggestion()">
                    üöÄ Envoyer la suggestion
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
