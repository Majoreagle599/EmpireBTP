{% extends 'base.html.twig' %}

{% block title %}Accueil - Empire BTP{% endblock %}

{% block body %}
<div class="hero-section animate-fade-in">
    <div class="container text-center">
        <div class="hero-content">
            {% if app.user %}
                <p class="hero-subtitle animate-slide-up">Bienvenue dans votre empire</p>
                <h1 class="hero-title animate-slide-up">
                    <span>{{ app.user.name|default(app.user.email) }}</span>
                </h1>
                <p class="lead animate-slide-up">
                    Votre plateforme de gestion BTP derniÃ¨re gÃ©nÃ©ration. 
                    <br>GÃ©rez vos chantiers, optimisez votre matÃ©riel et dominez le secteur.
                </p>
                <div class="mt-4 animate-slide-up">
                    <a href="{{ path('app_materiel') }}" class="btn btn-custom me-3">
                        ğŸš€ AccÃ©der au MatÃ©riel
                    </a>
                    <a href="{{ path('app_account') }}" class="btn btn-outline-custom">
                        ğŸ‘¤ Mon profil
                    </a>
                </div>
            {% else %}
                <p class="hero-subtitle animate-slide-up">Bienvenue sur</p>
                <h1 class="hero-title animate-slide-up">
                    Empire <span>BTP</span>
                </h1>
                <p class="lead animate-slide-up">
                    La plateforme nouvelle gÃ©nÃ©ration pour gÃ©rer votre entreprise de construction.
                    <br>Technologie gaming. Performance professionnelle.
                </p>
                <div class="mt-4 animate-slide-up">
                    <a href="{{ path('app_register') }}" class="btn btn-custom me-3">
                        ğŸš€ Commencer Maintenant
                    </a>
                    <a href="{{ path('app_login') }}" class="btn btn-outline-custom">
                        ğŸ”‘ Se connecter
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

{# Section Secteurs d'activitÃ© - Visible uniquement pour les utilisateurs connectÃ©s #}
{% if app.user %}
<div class="py-5" style="background-color: var(--bg-main); position: relative; z-index: 1;">
    <div class="container">
        <div class="text-center mb-5 animate-slide-up">
            <h2 class="display-5 fw-bold text-accent mb-3">ğŸ¯ Les Secteurs d'ActivitÃ©</h2>
            <p class="text-secondary fs-5">SpÃ©cialisez-vous dans l'un de nos 4 secteurs du BTP</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6 col-lg-3 animate-slide-up">
                <a href="{{ path('app_secteur_voirie') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ›£ï¸</div>
                        <h3 class="card-title">Voirie</h3>
                        <p class="card-text">
                            Travaux routiers, amÃ©nagements urbains et infrastructures
                        </p>
                        <span class="text-accent fw-bold">DÃ©couvrir â†’</span>
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3 animate-slide-up" style="animation-delay: 0.1s;">
                <a href="{{ path('app_secteur_carriere') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">â›ï¸</div>
                        <h3 class="card-title">CarriÃ¨re</h3>
                        <p class="card-text">
                            Extraction de matÃ©riaux, concassage et production
                        </p>
                        <span class="text-accent fw-bold">DÃ©couvrir â†’</span>
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3 animate-slide-up" style="animation-delay: 0.2s;">
                <a href="{{ path('app_secteur_demolition') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ’¥</div>
                        <h3 class="card-title">DÃ©molition</h3>
                        <p class="card-text">
                            DÃ©construction, dÃ©montage et recyclage
                        </p>
                        <span class="text-accent fw-bold">DÃ©couvrir â†’</span>
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3 animate-slide-up" style="animation-delay: 0.3s;">
                <a href="{{ path('app_secteur_transport') }}" class="card hover-scale text-decoration-none">
                    <div class="card-body text-center">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸšš</div>
                        <h3 class="card-title">Transport</h3>
                        <p class="card-text">
                            Logistique BTP et gestion de flotte
                        </p>
                        <span class="text-accent fw-bold">DÃ©couvrir â†’</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Section Outils et FonctionnalitÃ©s - Uniquement si connectÃ© #}
{% if app.user %}
<div class="container py-5">
    <div class="text-center mb-5 animate-slide-up">
        <h2 class="display-5 fw-bold text-accent mb-3">âš™ï¸ Vos Outils de Gestion</h2>
        <p class="text-secondary fs-5">Des fonctionnalitÃ©s pensÃ©es pour optimiser votre entreprise BTP</p>
    </div>
    
    <div class="row g-4">
        <div class="col-md-6 col-lg-4 animate-slide-up">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸšœ</div>
                    <h3 class="card-title">Catalogue MatÃ©riel</h3>
                    <p class="card-text">
                        Explorez 100+ machines BTP avec filtres par secteur, catÃ©gorie et marque. Achat et location disponibles.
                    </p>
                    <a href="{{ path('app_materiel') }}" class="btn btn-outline-primary mt-auto">
                        Voir le catalogue
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.1s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ—ï¸</div>
                    <h3 class="card-title">Gestion de Chantiers</h3>
                    <p class="card-text">
                        CrÃ©ez, planifiez et suivez vos chantiers en temps rÃ©el. Assignez le matÃ©riel et le personnel.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        GÃ©rer mes chantiers
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.2s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ‘·</div>
                    <h3 class="card-title">Gestion du Personnel</h3>
                    <p class="card-text">
                        Recrutez, formez et gÃ©rez votre Ã©quipe. Optimisez la productivitÃ© et les compÃ©tences.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        GÃ©rer le personnel
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.3s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ”§</div>
                    <h3 class="card-title">Maintenance</h3>
                    <p class="card-text">
                        Suivez l'usure de votre parc matÃ©riel. Planifiez les rÃ©parations et optimisez la disponibilitÃ©.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        Maintenance
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.4s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“Š</div>
                    <h3 class="card-title">Statistiques</h3>
                    <p class="card-text">
                        Tableaux de bord dÃ©taillÃ©s sur la rentabilitÃ©, l'utilisation du matÃ©riel et la progression.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        Voir les stats
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 animate-slide-up" style="animation-delay: 0.5s;">
            <div class="card h-100">
                <div class="card-body">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ›’</div>
                    <h3 class="card-title">MarchÃ©</h3>
                    <p class="card-text">
                        Achetez et vendez du matÃ©riel d'occasion. Trouvez les meilleures opportunitÃ©s du marchÃ©.
                    </p>
                    <a href="#" class="btn btn-outline-primary mt-auto">
                        AccÃ©der au marchÃ©
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Sections Mises Ã  jour - Uniquement si NON connectÃ© #}
{% if not app.user %}
{# Section Mises Ã  jour rÃ©centes #}
<div class="updates-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-accent mb-3">ğŸ“ Mises Ã  jour rÃ©centes</h2>
            <p class="text-secondary fs-5">DÃ©couvrez les derniÃ¨res amÃ©liorations d'Empire BTP</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-8 mx-auto">
                {# Version 1.2.0 - Toujours visible #}
                <div class="update-card">
                    <div class="update-header">
                        <span class="update-badge update-badge-new">NOUVEAU</span>
                        <span class="update-version">v1.2.0</span>
                        <span class="update-date">27 Octobre 2024</span>
                    </div>
                    <h3 class="update-title">ğŸ¨ Refonte graphique complÃ¨te</h3>
                    <ul class="update-list">
                        <li>âœ¨ Nouveau thÃ¨me gaming sombre avec effets glow</li>
                        <li>âš¡ Optimisation des performances (chargement 3x plus rapide)</li>
                        <li>ğŸ¯ Navigation Turbo pour une expÃ©rience fluide</li>
                        <li>ğŸ“± Interface responsive amÃ©liorÃ©e</li>
                        <li>ğŸŒ™ Mode sombre permanent avec palette verte moderne</li>
                    </ul>
                </div>

                {# Anciennes versions - MasquÃ©es par dÃ©faut #}
                <div id="oldUpdates" class="collapse">
                    {# Version 1.1.0 #}
                    <div class="update-card">
                        <div class="update-header">
                            <span class="update-version">v1.1.0</span>
                            <span class="update-date">20 Octobre 2024</span>
                        </div>
                        <h3 class="update-title">ğŸšœ SystÃ¨me de matÃ©riel BTP</h3>
                        <ul class="update-list">
                            <li>ğŸ—ï¸ Ajout de 100 machines rÃ©parties sur 4 secteurs</li>
                            <li>ğŸ’° SystÃ¨me d'achat et de location de matÃ©riel</li>
                            <li>ğŸ“Š Statistiques dÃ©taillÃ©es par machine</li>
                            <li>ğŸ”§ Page catalogue avec filtres par secteur</li>
                        </ul>
                    </div>

                    {# Version 1.0.0 #}
                    <div class="update-card">
                        <div class="update-header">
                            <span class="update-version">v1.0.0</span>
                            <span class="update-date">15 Octobre 2024</span>
                        </div>
                        <h3 class="update-title">ğŸ‰ Lancement d'Empire BTP</h3>
                        <ul class="update-list">
                            <li>ğŸ” SystÃ¨me d'authentification complet</li>
                            <li>ğŸ‘¤ Gestion de profil utilisateur</li>
                            <li>ğŸ“œ RÃ¨glement du jeu</li>
                            <li>ğŸ® Interface de base du jeu</li>
                        </ul>
                    </div>
                </div>

                {# Bouton Voir plus/moins #}
                <div class="text-center mt-3">
                    <button class="btn-toggle-updates" type="button" data-bs-toggle="collapse" data-bs-target="#oldUpdates" aria-expanded="false">
                        <span class="toggle-text-more">ğŸ“œ Voir les anciennes versions</span>
                        <span class="toggle-text-less d-none">ğŸ”¼ Masquer les anciennes versions</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

{# Section Prochaines mises Ã  jour #}
<div class="roadmap-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-accent mb-3">ğŸš€ Prochaines mises Ã  jour</h2>
            <p class="text-secondary fs-5">Ce qui arrive bientÃ´t sur Empire BTP</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-8 mx-auto">
                {# En cours de dÃ©veloppement - Toujours visible #}
                <div class="roadmap-card roadmap-in-progress">
                    <div class="roadmap-status">
                        <span class="roadmap-badge roadmap-badge-progress">EN COURS</span>
                        <span class="roadmap-eta">Sortie prÃ©vue : Novembre 2024</span>
                    </div>
                    <h3 class="roadmap-title">ğŸ—ï¸ v1.3.0 - SystÃ¨me de chantiers</h3>
                    <ul class="roadmap-list">
                        <li>ğŸ“‹ CrÃ©ation et gestion de chantiers</li>
                        <li>â±ï¸ SystÃ¨me de temps rÃ©el pour les projets</li>
                        <li>ğŸ’¼ Appels d'offres et contrats</li>
                        <li>ğŸ“Š Suivi de progression des travaux</li>
                        <li>ğŸ’° Calcul automatique des coÃ»ts et bÃ©nÃ©fices</li>
                    </ul>
                    <div class="roadmap-progress">
                        <div class="progress">
                            <div class="progress-bar bg-success" style="width: 65%">65%</div>
                        </div>
                    </div>
                </div>

                {# Futures versions - MasquÃ©es par dÃ©faut #}
                <div id="futureRoadmap" class="collapse">
                    {# PlanifiÃ© #}
                    <div class="roadmap-card roadmap-planned">
                        <div class="roadmap-status">
                            <span class="roadmap-badge roadmap-badge-planned">PLANIFIÃ‰</span>
                            <span class="roadmap-eta">Sortie prÃ©vue : DÃ©cembre 2024</span>
                        </div>
                        <h3 class="roadmap-title">ğŸ‘· v1.4.0 - Gestion du personnel</h3>
                        <ul class="roadmap-list">
                            <li>ğŸ‘¨â€ğŸ’¼ Recrutement d'employÃ©s (ouvriers, chefs d'Ã©quipe, ingÃ©nieurs)</li>
                            <li>ğŸ“ˆ SystÃ¨me d'expÃ©rience et de compÃ©tences</li>
                            <li>ğŸ’µ Gestion des salaires et productivitÃ©</li>
                            <li>ğŸ“ Formation et amÃ©lioration du personnel</li>
                            <li>â­ SystÃ¨me de satisfaction et fidÃ©litÃ©</li>
                        </ul>
                    </div>

                    {# PrÃ©vu #}
                    <div class="roadmap-card roadmap-future">
                        <div class="roadmap-status">
                            <span class="roadmap-badge roadmap-badge-future">Ã€ VENIR</span>
                            <span class="roadmap-eta">T1 2025</span>
                        </div>
                        <h3 class="roadmap-title">ğŸ† v1.5.0 - CompÃ©tition et classements</h3>
                        <ul class="roadmap-list">
                            <li>ğŸ¥‡ Classements globaux et par secteur</li>
                            <li>ğŸ¤ SystÃ¨me d'alliances entre joueurs</li>
                            <li>âš”ï¸ Appels d'offres compÃ©titifs</li>
                            <li>ğŸ… SuccÃ¨s et badges Ã  dÃ©bloquer</li>
                            <li>ğŸ“Š Statistiques et comparaisons</li>
                        </ul>
                    </div>

                    {# IdÃ©es futures #}
                    <div class="roadmap-card roadmap-future">
                        <div class="roadmap-status">
                            <span class="roadmap-badge roadmap-badge-idea">IDÃ‰ES</span>
                            <span class="roadmap-eta">2025</span>
                        </div>
                        <h3 class="roadmap-title">ğŸ’¡ FonctionnalitÃ©s en rÃ©flexion</h3>
                        <ul class="roadmap-list">
                            <li>ğŸŒ Carte interactive avec villes et rÃ©gions</li>
                            <li>ğŸ’¬ SystÃ¨me de messagerie entre joueurs</li>
                            <li>ğŸ“° Fil d'actualitÃ©s et Ã©vÃ©nements du jeu</li>
                            <li>ğŸ Ã‰vÃ©nements saisonniers et rÃ©compenses</li>
                            <li>ğŸ“± Application mobile</li>
                            <li>ğŸ”Š SystÃ¨me de notifications en temps rÃ©el</li>
                        </ul>
                    </div>
                </div>

                {# Bouton Voir plus/moins #}
                <div class="text-center mt-3">
                    <button class="btn-toggle-roadmap" type="button" data-bs-toggle="collapse" data-bs-target="#futureRoadmap" aria-expanded="false">
                        <span class="toggle-text-more">ğŸš€ Voir toutes les futures mises Ã  jour</span>
                        <span class="toggle-text-less d-none">ğŸ”¼ Masquer les futures mises Ã  jour</span>
                    </button>
                </div>

                {# Bouton SuggÃ©rer une fonctionnalitÃ© #}
                <div class="text-center mt-4">
                    <a href="#" class="btn-suggest-feature" data-bs-toggle="modal" data-bs-target="#suggestModal">
                        <span class="suggest-icon">ğŸ’¡</span>
                        <span class="suggest-text">SuggÃ©rer une fonctionnalitÃ©</span>
                    </a>
                    <p class="suggest-subtitle">
                        Vous avez une idÃ©e ? Partagez-la avec nous !
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{# Modal Suggestion - Visible pour tous #}
<div class="modal fade" id="suggestModal" tabindex="-1" aria-labelledby="suggestModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="suggestModalLabel">ğŸ’¡ SuggÃ©rer une fonctionnalitÃ©</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="suggestForm">
                    <div class="mb-3">
                        <label for="suggestTitle" class="form-label">Titre de la suggestion *</label>
                        <input type="text" class="form-control" id="suggestTitle" required placeholder="Ex: SystÃ¨me de notifications push">
                    </div>
                    <div class="mb-3">
                        <label for="suggestCategory" class="form-label">CatÃ©gorie *</label>
                        <select class="form-select" id="suggestCategory" required>
                            <option value="">Choisir une catÃ©gorie...</option>
                            <option value="gameplay">ğŸ® Gameplay</option>
                            <option value="interface">ğŸ¨ Interface</option>
                            <option value="social">ğŸ‘¥ Social</option>
                            <option value="technique">âš™ï¸ Technique</option>
                            <option value="autre">ğŸ’¡ Autre</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="suggestDescription" class="form-label">Description dÃ©taillÃ©e *</label>
                        <textarea class="form-control" id="suggestDescription" rows="5" required placeholder="DÃ©crivez votre idÃ©e en dÃ©tail..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="suggestEmail" class="form-label">Votre email (optionnel)</label>
                        <input type="email" class="form-control" id="suggestEmail" placeholder="Pour vous tenir informÃ© de l'avancement">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" onclick="submitSuggestion()">
                    ğŸš€ Envoyer la suggestion
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
